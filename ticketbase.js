!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.TBjs=e()}}(function(){var e,t,n;return function r(e,t,n){function i(s,a){if(!t[s]){if(!e[s]){var f=typeof require=="function"&&require;if(!a&&f)return f(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=t[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return i(n?n:t)},c,c.exports,r,e,t,n)}return t[s].exports}var o=typeof require=="function"&&require;for(var s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,n){var r=e("./template");var i=e("ajaxapi");var o=e("dom101/add-class");var s=e("dom101/ready");var a=e("dom101/query-selector-all");var f=e("dom101/query-selector");var u=t.exports={};u.infect=function(){c(a("[data-tb]"),function(e){u.widget(e)})};u.widget=function(e){var t=e.getAttribute("data-tb");e.innerHTML="helol";o(e,"tb-loading")};s(function(){u.infect()});function c(e,t){var n,r=e.length;if(length===+length){for(n=0,r=e.length;n<r;n++){t(e[n],n)}}else{for(n in e){if(e.hasOwnProperty(n))t(e[n],n)}}return e}},{"./template":22,ajaxapi:2,"dom101/add-class":18,"dom101/query-selector":20,"dom101/query-selector-all":19,"dom101/ready":21}],2:[function(e,t,n){function r(e){if(!(this instanceof r))return new r(e);if(typeof e==="string")e={base:e};else if(!e)e={};this.base=e.base;this._after=[];this._before=[];this.response=null}r.request=e("then-request");r.prototype.request=function(e,t,n){var i={headers:{},qs:{},json:n||{}};var o={method:e,url:this.prefix(t),data:n,headers:i.headers,options:i};this._before.forEach(function(e){e.call(this,o)});var s=r.request(o.method,o.url,o.options);s=s.then(this.saveResponse.bind(this)).then(this.parseBody.bind(this));this._after.forEach(function(e){s=s.then(e[0].bind(this),e[1].bind(this))});return s};r.prototype.get=i("GET");r.prototype.put=i("PUT");r.prototype.del=i("DELETE");r.prototype.post=i("POST");r.prototype.patch=i("PATCH");function i(e){return function(){return r.prototype.request.apply(this,[e].concat([].slice.call(arguments)))}}r.prototype.before=function(e){this._before.push(e);return this};r.prototype.after=function(e,t){this._after.push([e,t]);return this};r.prototype.parseBody=function(e){var t=e.getBody(),n=e.headers["content-type"];if(n.match(/^application\/json/))return JSON.parse(t);else return t};r.prototype.prefix=function(e){if(e[0]==="/")return(this.base||"")+e;else return e};r.prototype.saveResponse=function(e){this.response=this.res=e;return e};t.exports=r},{"then-request":3}],3:[function(e,t,n){"use strict";var r=e("promise");var i=e("http-response-object");var o=e("./lib/handle-qs.js");t.exports=s;function s(e,t,n,s){var a=new r(function(r,a){var f=new window.XMLHttpRequest;if(typeof e!=="string"){throw new TypeError("The method must be a string.")}if(typeof t!=="string"){throw new TypeError("The URL/path must be a string.")}if(typeof n==="function"){s=n;n={}}if(n===null||n===undefined){n={}}if(typeof n!=="object"){throw new TypeError("Options must be an object (or null).")}if(typeof s!=="function"){s=undefined}e=e.toUpperCase();n.headers=n.headers||{};var u;var c=!!((u=/^([\w-]+:)?\/\/([^\/]+)/.exec(n.uri))&&u[2]!=window.location.host);if(!c)n.headers["X-Requested-With"]="XMLHttpRequest";if(n.qs){t=o(t,n.qs)}if(n.json){n.body=JSON.stringify(n.json);n.headers["content-type"]="application/json"}f.onreadystatechange=function(){if(f.readyState===4){var e={};f.getAllResponseHeaders().split("\r\n").forEach(function(t){var n=t.split(":");if(n.length>1){e[n[0].toLowerCase()]=n.slice(1).join(":").trim()}});r(new i(f.status,e,f.responseText))}};f.open(e,t,true);for(var p in n.headers){f.setRequestHeader(p.toLowerCase(),n.headers[p])}f.send(n.body?n.body:null)});a.getBody=function(){return a.then(function(e){return e.getBody()})};return a.nodeify(s)}},{"./lib/handle-qs.js":4,"http-response-object":5,promise:6}],4:[function(e,t,n){"use strict";var r=e("qs").parse;var i=e("qs").stringify;t.exports=o;function o(e,t){e=e.split("?");var n=e[0];var o=(e[1]||"").split("#")[0];var s=e[1]&&e[1].split("#").length>1?"#"+e[1].split("#")[1]:"";var a=r(o);for(var f in t){a[f]=t[f]}o=i(a);if(o!==""){o="?"+o}return n+o+s}},{qs:12}],5:[function(e,t,n){"use strict";t.exports=r;function r(e,t,n){if(typeof e!=="number"){throw new TypeError("statusCode must be a number but was "+typeof e)}if(t===null){throw new TypeError("headers cannot be null")}if(typeof t!=="object"){throw new TypeError("headers must be an object but was "+typeof t)}this.statusCode=e;this.headers={};for(var r in t){this.headers[r.toLowerCase()]=t[r]}this.body=n}r.prototype.getBody=function(e){if(this.statusCode>=300){var t=new Error("Server responded with status code "+this.statusCode+":\n"+this.body.toString());t.statusCode=this.statusCode;t.headers=this.headers;t.body=this.body;throw t}return e?this.body.toString(e):this.body}},{}],6:[function(e,t,n){"use strict";t.exports=e("./lib/core.js");e("./lib/done.js");e("./lib/es6-extensions.js");e("./lib/node-extensions.js")},{"./lib/core.js":7,"./lib/done.js":8,"./lib/es6-extensions.js":9,"./lib/node-extensions.js":10}],7:[function(e,t,n){"use strict";var r=e("asap");t.exports=i;function i(e){if(typeof this!=="object")throw new TypeError("Promises must be constructed via new");if(typeof e!=="function")throw new TypeError("not a function");var t=null;var n=null;var i=[];var a=this;this.then=function(e,t){return new a.constructor(function(n,r){f(new o(e,t,n,r))})};function f(e){if(t===null){i.push(e);return}r(function(){var r=t?e.onFulfilled:e.onRejected;if(r===null){(t?e.resolve:e.reject)(n);return}var i;try{i=r(n)}catch(o){e.reject(o);return}e.resolve(i)})}function u(e){try{if(e===a)throw new TypeError("A promise cannot be resolved with itself.");if(e&&(typeof e==="object"||typeof e==="function")){var r=e.then;if(typeof r==="function"){s(r.bind(e),u,c);return}}t=true;n=e;p()}catch(i){c(i)}}function c(e){t=false;n=e;p()}function p(){for(var e=0,t=i.length;e<t;e++)f(i[e]);i=null}s(e,u,c)}function o(e,t,n,r){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof t==="function"?t:null;this.resolve=n;this.reject=r}function s(e,t,n){var r=false;try{e(function(e){if(r)return;r=true;t(e)},function(e){if(r)return;r=true;n(e)})}catch(i){if(r)return;r=true;n(i)}}},{asap:11}],8:[function(e,t,n){"use strict";var r=e("./core.js");var i=e("asap");t.exports=r;r.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(e){i(function(){throw e})})}},{"./core.js":7,asap:11}],9:[function(e,t,n){"use strict";var r=e("./core.js");var i=e("asap");t.exports=r;function o(e){this.then=function(t){if(typeof t!=="function")return this;return new r(function(n,r){i(function(){try{n(t(e))}catch(i){r(i)}})})}}o.prototype=r.prototype;var s=new o(true);var a=new o(false);var f=new o(null);var u=new o(undefined);var c=new o(0);var p=new o("");r.resolve=function(e){if(e instanceof r)return e;if(e===null)return f;if(e===undefined)return u;if(e===true)return s;if(e===false)return a;if(e===0)return c;if(e==="")return p;if(typeof e==="object"||typeof e==="function"){try{var t=e.then;if(typeof t==="function"){return new r(t.bind(e))}}catch(n){return new r(function(e,t){t(n)})}}return new o(e)};r.all=function(e){var t=Array.prototype.slice.call(e);return new r(function(e,n){if(t.length===0)return e([]);var r=t.length;function i(o,s){try{if(s&&(typeof s==="object"||typeof s==="function")){var a=s.then;if(typeof a==="function"){a.call(s,function(e){i(o,e)},n);return}}t[o]=s;if(--r===0){e(t)}}catch(f){n(f)}}for(var o=0;o<t.length;o++){i(o,t[o])}})};r.reject=function(e){return new r(function(t,n){n(e)})};r.race=function(e){return new r(function(t,n){e.forEach(function(e){r.resolve(e).then(t,n)})})};r.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":7,asap:11}],10:[function(e,t,n){"use strict";var r=e("./core.js");var i=e("asap");t.exports=r;r.denodeify=function(e,t){t=t||Infinity;return function(){var n=this;var i=Array.prototype.slice.call(arguments);return new r(function(r,o){while(i.length&&i.length>t){i.pop()}i.push(function(e,t){if(e)o(e);else r(t)});var s=e.apply(n,i);if(s&&(typeof s==="object"||typeof s==="function")&&typeof s.then==="function"){r(s)}})}};r.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments);var n=typeof t[t.length-1]==="function"?t.pop():null;var o=this;try{return e.apply(this,arguments).nodeify(n,o)}catch(s){if(n===null||typeof n=="undefined"){return new r(function(e,t){t(s)})}else{i(function(){n.call(o,s)})}}}};r.prototype.nodeify=function(e,t){if(typeof e!="function")return this;this.then(function(n){i(function(){e.call(t,null,n)})},function(n){i(function(){e.call(t,n)})})}},{"./core.js":7,asap:11}],11:[function(e,t,n){(function(e){var n={task:void 0,next:null};var r=n;var i=false;var o=void 0;var s=false;function a(){while(n.next){n=n.next;var e=n.task;n.task=void 0;var t=n.domain;if(t){n.domain=void 0;t.enter()}try{e()}catch(r){if(s){if(t){t.exit()}setTimeout(a,0);if(t){t.enter()}throw r}else{setTimeout(function(){throw r},0)}}if(t){t.exit()}}i=false}if(typeof e!=="undefined"&&e.nextTick){s=true;o=function(){e.nextTick(a)}}else if(typeof setImmediate==="function"){if(typeof window!=="undefined"){o=setImmediate.bind(window,a)}else{o=function(){setImmediate(a)}}}else if(typeof MessageChannel!=="undefined"){var f=new MessageChannel;f.port1.onmessage=a;o=function(){f.port2.postMessage(0)}}else{o=function(){setTimeout(a,0)}}function u(t){r=r.next={task:t,domain:s&&e.domain,next:null};if(!i){i=true;o()}}t.exports=u}).call(this,e("_process"))},{_process:17}],12:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":13}],13:[function(e,t,n){var r=e("./stringify");var i=e("./parse");var o={};t.exports={stringify:r,parse:i}},{"./parse":14,"./stringify":15}],14:[function(e,t,n){var r=e("./utils");var i={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3};i.parseValues=function(e,t){var n={};var i=e.split(t.delimiter,t.parameterLimit===Infinity?undefined:t.parameterLimit);for(var o=0,s=i.length;o<s;++o){var a=i[o];var f=a.indexOf("]=")===-1?a.indexOf("="):a.indexOf("]=")+1;if(f===-1){n[r.decode(a)]=""}else{var u=r.decode(a.slice(0,f));var c=r.decode(a.slice(f+1));if(!n.hasOwnProperty(u)){n[u]=c}else{n[u]=[].concat(n[u]).concat(c)}}}return n};i.parseObject=function(e,t,n){if(!e.length){return t}var r=e.shift();var o={};if(r==="[]"){o=[];o=o.concat(i.parseObject(e,t,n))}else{var s=r[0]==="["&&r[r.length-1]==="]"?r.slice(1,r.length-1):r;var a=parseInt(s,10);var f=""+a;if(!isNaN(a)&&r!==s&&f===s&&a>=0&&a<=n.arrayLimit){o=[];o[a]=i.parseObject(e,t,n)}else{o[s]=i.parseObject(e,t,n)}}return o};i.parseKeys=function(e,t,n){if(!e){return}var r=/^([^\[\]]*)/;var o=/(\[[^\[\]]*\])/g;var s=r.exec(e);if(Object.prototype.hasOwnProperty(s[1])){return}var a=[];if(s[1]){a.push(s[1])}var f=0;while((s=o.exec(e))!==null&&f<n.depth){++f;if(!Object.prototype.hasOwnProperty(s[1].replace(/\[|\]/g,""))){a.push(s[1])}}if(s){a.push("["+e.slice(s.index)+"]")}return i.parseObject(a,t,n)};t.exports=function(e,t){if(e===""||e===null||typeof e==="undefined"){return{}}t=t||{};t.delimiter=typeof t.delimiter==="string"||r.isRegExp(t.delimiter)?t.delimiter:i.delimiter;t.depth=typeof t.depth==="number"?t.depth:i.depth;t.arrayLimit=typeof t.arrayLimit==="number"?t.arrayLimit:i.arrayLimit;t.parameterLimit=typeof t.parameterLimit==="number"?t.parameterLimit:i.parameterLimit;var n=typeof e==="string"?i.parseValues(e,t):e;var o={};var s=Object.keys(n);for(var a=0,f=s.length;a<f;++a){var u=s[a];var c=i.parseKeys(u,n[u],t);o=r.merge(o,c)}return r.compact(o)}},{"./utils":16}],15:[function(e,t,n){var r=e("./utils");var i={delimiter:"&",indices:true};i.stringify=function(e,t,n){if(r.isBuffer(e)){e=e.toString()}else if(e instanceof Date){e=e.toISOString()}else if(e===null){e=""}if(typeof e==="string"||typeof e==="number"||typeof e==="boolean"){return[encodeURIComponent(t)+"="+encodeURIComponent(e)]}var o=[];if(typeof e==="undefined"){return o}var s=Object.keys(e);for(var a=0,f=s.length;a<f;++a){var u=s[a];if(!n.indices&&Array.isArray(e)){o=o.concat(i.stringify(e[u],t,n))}else{o=o.concat(i.stringify(e[u],t+"["+u+"]",n))}}return o};t.exports=function(e,t){t=t||{};var n=typeof t.delimiter==="undefined"?i.delimiter:t.delimiter;t.indices=typeof t.indices==="boolean"?t.indices:i.indices;var r=[];if(typeof e!=="object"||e===null){return""}var o=Object.keys(e);for(var s=0,a=o.length;s<a;++s){var f=o[s];r=r.concat(i.stringify(e[f],f,t))}return r.join(n)}},{"./utils":16}],16:[function(e,t,n){var r={};n.arrayToObject=function(e){var t={};for(var n=0,r=e.length;n<r;++n){if(typeof e[n]!=="undefined"){t[n]=e[n]}}return t};n.merge=function(e,t){if(!t){return e}if(typeof t!=="object"){if(Array.isArray(e)){e.push(t)}else{e[t]=true}return e}if(typeof e!=="object"){e=[e].concat(t);return e}if(Array.isArray(e)&&!Array.isArray(t)){e=n.arrayToObject(e)}var r=Object.keys(t);for(var i=0,o=r.length;i<o;++i){var s=r[i];var a=t[s];if(!e[s]){e[s]=a}else{e[s]=n.merge(e[s],a)}}return e};n.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}};n.compact=function(e,t){if(typeof e!=="object"||e===null){return e}t=t||[];var r=t.indexOf(e);if(r!==-1){return t[r]}t.push(e);if(Array.isArray(e)){var i=[];for(var o=0,s=e.length;o<s;++o){if(typeof e[o]!=="undefined"){i.push(e[o])}}return i}var a=Object.keys(e);for(o=0,s=a.length;o<s;++o){var f=a[o];e[f]=n.compact(e[f],t)}return e};n.isRegExp=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"};n.isBuffer=function(e){if(e===null||typeof e==="undefined"){return false}return!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},{}],17:[function(e,t,n){var r=t.exports={};var i=[];var o=false;function s(){if(o){return}o=true;var e;var t=i.length;while(t){e=i;i=[];var n=-1;while(++n<t){e[n]()}t=i.length}o=false}r.nextTick=function(e){i.push(e);if(!o){setTimeout(s,0)}};r.title="browser";r.browser=true;r.env={};r.argv=[];r.version="";function a(){}r.on=a;r.addListener=a;r.once=a;r.off=a;r.removeListener=a;r.removeAllListeners=a;r.emit=a;r.binding=function(e){throw new Error("process.binding is not supported")};r.cwd=function(){return"/"};r.chdir=function(e){throw new Error("process.chdir is not supported")};r.umask=function(){return 0}},{}],18:[function(e,t,n){function r(e,t){if(e.classList)e.classList.add(t);else e.className+=" "+t}t.exports=r},{}],19:[function(e,t,n){function r(e){return document.querySelectorAll(e)}t.exports=r},{}],20:[function(e,t,n){function r(e){return document.querySelector(e)}t.exports=r},{}],21:[function(e,t,n){function r(e){if(document.addEventListener){document.addEventListener("DOMContentLoaded",e)}else{document.attachEvent("onreadystatechange",function(){if(document.readyState==="interactive")e()})}}t.exports=r},{}],22:[function(e,t,n){var r={};var i="function(s){"+"return (''+s)"+".replace(/&/g,'&amp;')"+".replace(/</g,'&lt;')"+".replace(/>/g,'&gt;')"+".replace(/'/g,'&quot;')"+";}";t.exports=function(e,t){var n;n=new Function("obj","var p=[],"+"print=function(){p.push.apply(p,arguments);},"+"escape="+i+";"+"with(obj||{}){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',escape($1),'").replace(/\t!=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return t?n(t):n}},{}]},{},[1])(1)});